# 应用菜单模块

## 模块安装

```
import {AgentMenu} from 'wecom'
```

## 快速开始

> 需要先创建自己的应用

```javascript
// 应用菜单管理模块实例化
const agent = new AgentMenu({
  corpId: process.env.CORPID,
  corpSecret: process.env.TEST_SECRET,
  agentId: process.env.TEST_AGENT_ID,
});
// 获取菜单数据
const ret = await agent.get();
```

## 实例方法

### **方法名**：`create`

**说明**：创建菜单
**例子**：

```javascript
agent.create({
  url: "menu/create",
  method: "POST",
  params: { agentid: this.agentId },
  data,
});
```

**参数说明**

| 参数名     | 参数类型 |           必填            | 参数描述                                                                                  |
| :--------- | :------: | :-----------------------: | :---------------------------------------------------------------------------------------- |
| type       |  array   |            是             | 菜单的响应动作类型（参考下方`type 说明`）                                                 |
| name       |  string  |            是             | 菜单的名字。不能为空，主菜单不能超过 16 字节，子菜单不能超过 40 字节。                    |
| button     |  array   |            是             | 一级菜单数组，个数应为 1~3 个                                                             |
| sub_button |  array   |            否             | 二级菜单数组，个数应为 1~5 个                                                             |
| key        |  string  |   click 等点击类型必须    | 菜单 KEY 值，用于消息接口推送，不超过 128 字节                                            |
| url        |  string  |       view 类型必须       | 网页链接，成员点击菜单可打开链接，不超过 1024 字节。为了提高安全性，建议使用 https 的 url |
| pagepath   |  string  | view_miniprogram 类型必须 | 小程序的页面路径                                                                          |
| appid      |  string  | view_miniprogram 类型必须 | 小程序的 appid（仅与企业绑定的小程序可配置）                                              |

> type 说明

| 参数名             | 功能名称               | 说明                                                                                                                                                                                              |
| :----------------- | :--------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| click              | 点击推事件             | 成员点击 click 类型按钮后，企业微信服务器会通过消息接口推送消息类型为 event 的结构给开发者（参考消息接口指南），并且带上按钮中开发者填写的 key 值，开发者可以通过自定义的 key 值与成员进行交互；  |
| view               | 跳转 URL               | 成员点击 view 类型按钮后，企业微信客户端将会打开开发者在按钮中填写的网页 URL，可与网页授权获取成员基本信息接口结合，获得成员基本信息。                                                            |
| scancode_push      | 扫码推事件             | 成员点击按钮后，企业微信客户端将调起扫一扫工具，完成扫码操作后显示扫描结果（如果是 URL，将进入 URL），且会将扫码的结果传给开发者，开发者可用于下发消息。                                          |
| scancode_waitmsg   | 扫码推事件             | 且弹出“消息接收中”提示框 成员点击按钮后，企业微信客户端将调起扫一扫工具，完成扫码操作后，将扫码的结果传给开发者，同时收起扫一扫工具，然后弹出“消息接收中”提示框，随后可能会收到开发者下发的消息。 |
| pic_sysphoto       | 弹出系统拍照发图       | 成员点击按钮后，企业微信客户端将调起系统相机，完成拍照操作后，会将拍摄的相片发送给开发者，并推送事件给开发者，同时收起系统相机，随后可能会收到开发者下发的消息。                                  |
| pic_photo_or_album | 弹出拍照或者相册发图   | 成员点击按钮后，企业微信客户端将弹出选择器供成员选择“拍照”或者“从手机相册选择”。成员选择后即走其他两种流程。                                                                                      |
| pic_weixin         | 弹出企业微信相册发图器 | 成员点击按钮后，企业微信客户端将调起企业微信相册，完成选择操作后，将选择的相片发送给开发者的服务器，并推送事件给开发者，同时收起相册，随后可能会收到开发者下发的消息。                            |
| location_select    | 弹出地理位置选择器     | 成员点击按钮后，企业微信客户端将调起地理位置选择工具，完成选择操作后，将选择的地理位置发送给开发者的服务器，同时收起位置选择工具，随后可能会收到开发者下发的消息。                                |
| view_miniprogram   | 跳转到小程序           | 成员点击按钮后，企业微信客户端将会打开开发者在按钮中配置的小程序                                                                                                                                  |

### **方法名**：`get`

**说明**：获取应用菜单数据
**例子**：

```javascript
agent.get();
```

### **方法名**：`delete`

**说明**：删除应用菜单
**例子**：

```javascript
agent.delete();
```

**官方地址**：
详情参考[官方文档](https://work.weixin.qq.com/api/doc/90000/90135/90227)
